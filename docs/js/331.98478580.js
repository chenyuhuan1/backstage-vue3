"use strict";(self["webpackChunkbackstage_vue3"]=self["webpackChunkbackstage_vue3"]||[]).push([[331],{5498:function(e,n,t){var a=t(1212);t(2160),t(6623),t(6866),a.BsDialog.install=function(e){e.component(a.BsDialog.name,a.BsDialog)};var r=a.BsDialog;n.ZP=a.BsDialog},8094:function(e,n,t){var a=t(2160),r=t(229),o=t(6866),i=t(1212),l=t(4126),u=t(3978);t(6623),t(3602),t(1146),t(186),t(5918),t(3773),t(7300),t(9640),t(6999),t(1661),t(6289),t(7576),t(5936),t(1245),t(1944),t(8395),t(8010),t(2059),t(7088),t(3331);var c=o.defineComponent({setup:function(e,n){var t=n.expose,c=o.ref(),s=o.ref(),f=o.reactive({title:"",width:"800px",confirmText:"确认",cancelText:"关闭",formConfig:{columns:[],colNum:24,labelWidth:"100px",notOpBtn:!0}}),d=o.ref(),p=function(e){var n,t=e.config,i=e.formInitValue;d.value=i||{};var p=u.merge({},f,r._objectSpread2(r._objectSpread2({},t),{},{confirm:t.confirm?a._asyncToGenerator(a._regeneratorRuntime().mark((function e(){var n;return a._regeneratorRuntime().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.value.validate();case 2:if(n=e.sent,n){e.next=5;break}return e.abrupt("return",!1);case 5:if(e.t0=t.confirm,!e.t0){e.next=11;break}return e.next=9,t.confirm(d.value);case 9:e.t1=e.sent,e.t0=!1!==e.t1;case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e)}))):void 0,render:function(){return o.createVNode(o.Fragment,null,[o.createVNode(l.BsForm,{ref:s,modelValue:d.value,"onUpdate:modelValue":function(e){return d.value=e},class:"bs-form",config:r._objectSpread2(r._objectSpread2({},f.formConfig),t.formConfig)},null)])}}));null===(n=c.value)||void 0===n||n.show(p),setTimeout((function(){var e;null===(e=s.value)||void 0===e||e.clearValidate()}))},g=function(e,n){setTimeout((function(){d.value[e]=n}))},m=function(e){return d.value[e]};return t({show:p,setFieldsValue:g,getFieldsValue:m}),function(){return o.createVNode("div",{class:"bs-form-dialog"},[o.createVNode(i.BsDialog,{ref:c},null)])}}});c.install=function(e){e.component(c.name,c)};var s=c;n.ZP=c},9328:function(e,n,t){var a=t(2160),r=t(6866),o=t(1212),i=t(4126),l=t(7342),u=t(3978);t(6623),t(229),t(3602),t(1146),t(186),t(5918),t(3773),t(7300),t(9640),t(6999),t(1661),t(6289),t(7576),t(5936),t(1245),t(1944),t(8395),t(8010),t(2059),t(7088),t(3331);var c=r.defineComponent({setup:function(e,n){var t=n.expose,c=r.ref(),s=r.ref(),f=r.reactive({title:"form Dialog标题",width:"800px",cancelText:"关闭",searchConfig:{columns:[],colNum:6,labelWidth:"100px"},listConfig:{columns:[],loadData:function(){var e=a._asyncToGenerator(a._regeneratorRuntime().mark((function e(){return a._regeneratorRuntime().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=a._asyncToGenerator(a._regeneratorRuntime().mark((function e(n){return a._regeneratorRuntime().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n({success:!0,list:[],total:0});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),tableConfig:{ifInitLoadData:!0},pagingConfig:{open:!0,pageIndex:1,pageSize:10}}}),d=r.ref(),p=function(){var e;null===(e=d.value)||void 0===e||e.getList({pageIndex:1})},g=r.ref({}),m=function(){var e=a._asyncToGenerator(a._regeneratorRuntime().mark((function e(n){var t,o,m,v,h,w;return a._regeneratorRuntime().wrap((function(e){while(1)switch(e.prev=e.next){case 0:o=n.config,m=n.formInitValue,g.value=m||{},v=u.merge({},f,o,{listConfig:{tableConfig:{ifInitLoadData:!1}}}),!1!==(null===o||void 0===o||null===(t=o.listConfig)||void 0===t||null===(t=t.tableConfig)||void 0===t?void 0:t.ifInitLoadData)&&setTimeout(a._asyncToGenerator(a._regeneratorRuntime().mark((function e(){var n;return a._regeneratorRuntime().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.value.validate();case 2:if(n=e.sent,n){e.next=5;break}return e.abrupt("return");case 5:p();case 6:case"end":return e.stop()}}),e)})))),h=function(){var e=a._asyncToGenerator(a._regeneratorRuntime().mark((function e(n){var t,r,o,i;return a._regeneratorRuntime().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=n.pageIndex,o=n.pageSize,v.searchConfig&&(v.searchConfig.loading=!0),e.next=4,null===(t=v.listConfig)||void 0===t?void 0:t.loadData({pageIndex:r,pageSize:o,searchForm:g.value});case 4:return i=e.sent,v.searchConfig&&(v.searchConfig.loading=!1),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),w=u.merge({},v,{render:function(){var e;return r.createVNode(r.Fragment,null,[(null===v||void 0===v||null===(e=v.searchConfig)||void 0===e?void 0:e.columns)&&r.createVNode(i.BsForm,{ref:s,modelValue:g.value,"onUpdate:modelValue":function(e){return g.value=e},class:"bs-form",config:v.searchConfig,onSearch:function(){p()}},null),v.actionsRender&&r.createVNode("div",{style:{marginBottom:"10px"}},[v.actionsRender()]),r.createVNode(l.BsTable,{style:{padding:0},ref:d,columns:v.listConfig.columns,"load-data":h,"table-config":v.listConfig.tableConfig,"paging-config":v.listConfig.pagingConfig},null)])}}),c.value.show(w);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),v=function(e,n){setTimeout((function(){g.value[e]=n}))},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.pageIndex,t=e.pageSize;d.value.getList(n,t)};return t({show:m,setSearchForm:v,searchForm:g,getList:h}),function(){return r.createVNode("div",{class:"bs-list-dialog"},[r.createVNode(o.BsDialog,{ref:c},null)])}}});c.install=function(e){e.component(c.name,c)};var s=c;n.ZP=c},7342:function(e,n,t){var a=t(2160),r=t(3978),o=t(6866),i=t(6623),l=o.defineComponent({name:"BsTableItem",components:{},props:{itemData:{type:Object,default:function(){return{prop:"prop",label:"label"}}}},setup:function(e){var n=o.toRefs(e),t=n.itemData,a=new i.CustomDynamicComponent,r=a.dynamicTableColumn,u=t.value.children&&t.value.children.length>0?t.value.children.map((function(e,n){return o.createVNode(l,{key:e.prop?e.prop:""+n,"item-data":e},null)})):null;return function(){return t.value.type&&"index"===t.value.type?o.createVNode(r,o.mergeProps({type:"index",width:t.value.width,"min-width":t.value.minWidth,align:t.value.align?t.value.align:"center",fixed:!!t.value.fixed&&t.value.fixed},t.value.nativeProps),null):(t.value.children=void 0,o.createVNode(r,o.mergeProps({prop:t.value.prop,label:t.value.label,width:t.value.width,"min-width":t.value.minWidth,align:t.value.align?t.value.align:"center",fixed:!!t.value.fixed&&t.value.fixed},t.value.nativeProps),{default:function(e){return o.createVNode(o.Fragment,null,[t.value.render?"function"===typeof t.value.render?t.value.render(e):t.value.render:e.row[t.value.prop],u])}}))}}}),u={BsTable:"style-module_BsTable__qrv-k",table:"style-module_table__GWlq8",rowRadio:"style-module_rowRadio__r34-P"},c=o.defineComponent({name:"BsTable",components:{},props:{tableConfig:{type:Object,default:function(){return{}}},pagingConfig:{type:Object,default:function(){return{}}},columns:{type:Array,required:!0,default:function(){return[]}},loadData:{type:Function,required:!0,default:function(){return function(){return new Promise((function(e){e({list:[],total:0})}))}}}},setup:function(e,n){var t=n.expose,c=o.toRefs(e),s=c.loadData,f=c.columns,d={ifInitLoadData:!0,rowKey:"id",nativeProps:{border:!0,stripe:!0}},p=function e(n){var t=r._toConsumableArray(n);t.forEach((function(n){n.title=n.label,n.children&&n.children.length?e(n.children):n.dataIndex=n.prop}))};i.CustomDynamicComponent.language===i.CustomDynamicComponent.antLanguage&&p(f.value);var g=o.reactive(r.merge(d,e.tableConfig));o.watch((function(){return e.tableConfig}),(function(){r.merge(g,d,e.tableConfig)}),{immediate:!0,deep:!0});var m={open:!0,pageIndex:1,pageSize:10,total:0,nativeProps:{layout:"total, sizes, prev, pager, next",showTotal:function(e){return"共 ".concat(e," 条")},showSizeChanger:!0}},v=o.reactive(r.merge(m,e.pagingConfig));o.watch((function(){return e.pagingConfig}),(function(){r.merge(v,m,e.pagingConfig)}),{immediate:!0,deep:!0});var h=o.ref(null),w=o.ref(void 0),x=o.ref(!1),b=o.reactive({pageIndex:v.pageIndex,pageSize:v.pageSize,total:v.total}),y=o.ref([]),C=function(){var e=a._asyncToGenerator(a._regeneratorRuntime().mark((function e(){var n,t,r,o,i,l,u=arguments;return a._regeneratorRuntime().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=u.length>0&&void 0!==u[0]?u[0]:{},t=n.pageIndex,r=void 0===t?b.pageIndex:t,o=n.pageSize,i=void 0===o?b.pageSize:o,e.prev=1,x.value=!0,e.next=5,s.value({pageIndex:r,pageSize:i});case 5:l=e.sent,l.success&&(y.value=l.list,b.total=l.total),b.pageIndex=r,b.pageSize=i,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),console.log(e.t0);case 14:return e.prev=14,x.value=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(){return e.apply(this,arguments)}}();o.onMounted((function(){g.ifInitLoadData&&C()}));var _=function(e){console.log("".concat(e," items per page")),b.pageIndex=1,b.pageSize=e,v.pageSizeChange&&v.pageSizeChange(e),C()},k=function(e){console.log("current page: ".concat(e)),b.pageIndex=e,v.pageIndexChange&&v.pageIndexChange(e),C()},V=o.ref([]),T=function(e){console.log("table-handleSelectionChange",e),V.value=e,g.rowSelection&&g.rowSelection.onChange&&g.rowSelection.onChange(e)},S=function(e){y.value=e};return t({tableDom:h,list:y,selectedRow:V,getList:C,setList:S}),function(){var e=new i.CustomDynamicComponent,n=e.dynamicTable,t=e.dynamicTableColumn,a=e.dynamicRadio,r=e.dynamicPagination;return o.createVNode("div",{class:["bs-table",u.BsTable]},[o.withDirectives(o.createVNode(n,o.mergeProps({height:"100%",ref:h,class:[u.table],data:y.value,columns:f.value,"data-source":y.value,style:{maxWidth:"100%"},"row-key":g.rowKey,pagination:!1},g.nativeProps,{onSelectionChange:function(e){return T(e)}}),{default:function(){return[i.CustomDynamicComponent.language===i.CustomDynamicComponent.eleLanguage?o.createVNode(o.Fragment,null,[g.rowSelection&&"checkout"===g.rowSelection.type?o.createVNode(t,{type:"selection",align:"center",selectable:function(e,n){var t,a;return null===(t=g.rowSelection)||void 0===t||!t.selectable||(null===(a=g.rowSelection)||void 0===a?void 0:a.selectable(e,n))}},null):null,g.rowSelection&&"radio"===g.rowSelection.type?o.createVNode(t,{label:"",align:"center",width:"60",fixed:!0},{default:function(e,n,t){var r,i;return o.createVNode("div",{style:{textAlign:"center"}},[o.createVNode(a,{disabled:!(null===(r=g.rowSelection)||void 0===r||!r.selectable)&&!(null!==(i=g.rowSelection)&&void 0!==i&&i.selectable(e.row,t)),class:[u.rowRadio],modelValue:w.value,"onUpdate:modelValue":function(e){return w.value=e},label:e.row[g.rowKey?g.rowKey:"id"],onChange:function(e){return T(e)}},null)])}}):null,f.value.map((function(e,n){return o.createVNode(l,{key:e.prop?e.prop:""+n,"item-data":e},null)}))]):null]}}),[[o.resolveDirective("loading"),x.value]]),v.open&&o.createVNode("div",{style:{display:"flex",justifyContent:"center",padding:"15px 0"}},[o.createVNode(r,o.mergeProps({"current-page":b.pageIndex,"page-size":b.pageSize,layout:m.layout,total:b.total,background:!0},v.nativeProps,{onSizeChange:function(e){return _(e)},onCurrentChange:function(e){return k(e)},current:b.pageIndex,onShowSizeChange:function(e,n){return _(n)}},i.CustomDynamicComponent.language===i.CustomDynamicComponent.antLanguage?{onChange:function(e){return k(e)}}:{}),null)])])}}});n.BsTable=c},1212:function(e,n,t){var a=t(2160),r=t(6866),o=t(6623),i=r.defineComponent({setup:function(e,n){var t=n.expose,i=r.ref(!1),l=r.ref(!1),u=r.reactive({title:"",width:"600px",confirmText:"确认",cancelText:"关闭",showFooter:!0}),c=r.reactive({title:""}),s=function(){var e=a._asyncToGenerator(a._regeneratorRuntime().mark((function e(n){return a._regeneratorRuntime().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Object.assign(c,u,n),l.value=!1,i.value=!0,e.next=5,r.nextTick();case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return t({show:s}),function(){var e=new o.CustomDynamicComponent,n=e.dynamicDialog,t=null;return c.showFooter&&(t=function(){return r.createVNode(r.Fragment,null,[r.createVNode(r.resolveComponent("el-button"),{disabled:l.value,loading:l.value,onClick:a._asyncToGenerator(a._regeneratorRuntime().mark((function e(){return a._regeneratorRuntime().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(l.value=!0,!c.cancel){e.next=13;break}if(e.t0=c.cancel,!e.t0){e.next=8;break}return e.next=6,c.cancel();case 6:e.t1=e.sent,e.t0=!1!==e.t1;case 8:if(e.t2=e.t0,!e.t2){e.next=11;break}i.value=!1;case 11:e.next=14;break;case 13:i.value=!1;case 14:l.value=!1;case 15:case"end":return e.stop()}}),e)})))},{default:function(){return[c.cancelText]}}),c.confirm&&r.createVNode(r.resolveComponent("el-button"),{type:"primary",disabled:l.value,loading:l.value,onClick:a._asyncToGenerator(a._regeneratorRuntime().mark((function e(){return a._regeneratorRuntime().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(l.value=!0,e.prev=1,e.t0=c.confirm,!e.t0){e.next=8;break}return e.next=6,c.confirm();case 6:e.t1=e.sent,e.t0=!1!==e.t1;case 8:if(e.t2=e.t0,!e.t2){e.next=11;break}i.value=!1;case 11:e.next=16;break;case 13:e.prev=13,e.t3=e["catch"](1),l.value=!1;case 16:l.value=!1;case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))},{default:function(){return[c.confirmText]}})])},c.footerRender&&(t=function(){return c.footerRender&&c.footerRender((function(){i.value=!1}))})),r.createVNode("div",{class:"bs-dialog"},[r.createVNode(n,r.mergeProps({modelValue:i.value,"onUpdate:modelValue":function(e){return i.value=e},width:c.width,title:c.title},c.nativeProps,{onClose:a._asyncToGenerator(a._regeneratorRuntime().mark((function e(){var n,t,r;return a._regeneratorRuntime().wrap((function(e){while(1)switch(e.prev=e.next){case 0:null!==(n=null===(t=c.nativeProps)||void 0===t?void 0:t.onClose)&&void 0!==n||null===(r=c.nativeProps)||void 0===r||r.onClose(),i.value=!1;case 2:case"end":return e.stop()}}),e)})))}),{default:function(){return r.createVNode(r.Fragment,null,[c.render&&c.render()])},header:function(){return c.headerRender?c.headerRender():c.title},footer:t})])}}});n.BsDialog=i},2331:function(e,n,t){t.r(n),t.d(n,{default:function(){return h}});var a=t(9328),r=t(8094),o=t(5498),i=t(124),l=t(8534),u=t(3396),c=t(4870),s={class:"dialog"},f=(0,u._)("a",{href:"https://github.com/chenyuhuan1/backstage-vue3/blob/master/src/examples/dialog/index.vue"},"https://github.com/chenyuhuan1/backstage-vue3/blob/master/src/examples/dialog/index.vue",-1),d=(0,u._)("span",null,"基础弹窗",-1),p=(0,u._)("span",null,"表单弹窗",-1),g=(0,u._)("span",null,"列表弹窗",-1),m=(0,u.aZ)({__name:"index",setup:function(e){var n=(0,c.iH)(),t=function(){var e,t={title:"基础弹窗",width:"500px",confirmText:"提交",cancelText:"关闭",render:function(){return"render内容"},confirm:function(){return new Promise((function(e){setTimeout((function(){e(!0)}),1e3)}))},cancel:function(){console.log("cancel")}};null===(e=n.value)||void 0===e||e.show(t)},m=(0,c.iH)(),v=function(){var e,n={title:"表单标题",width:"500px",confirmText:"提交",cancelText:"关闭",formConfig:{columns:[{prop:"name",label:"姓名",type:"input",required:!0},{prop:"sex",label:"年龄",type:"select",options:[{label:"男",value:1},{label:"女",value:2}],required:!0}],colNum:24,labelWidth:"100px"},confirm:function(e){return console.log("confirm",e),new Promise((function(e){setTimeout((function(){e(!0)}),1e3)}))},cancel:function(){console.log("cancel")}};null===(e=m.value)||void 0===e||e.show({config:n,formInitValue:{}})},h=(0,c.iH)(),w=function(){var e,n={title:"标题",width:"900px",confirmText:"提交",cancelText:"关闭",searchConfig:{columns:[{prop:"name",label:"姓名",type:"input"},{prop:"sex",label:"年龄",type:"select",options:[{label:"男",value:1},{label:"女",value:2}]}],colNum:8,labelWidth:"100px"},actionsRender:function(){return(0,u.Wm)("div",null,[(0,u.Wm)((0,u.up)("el-button"),{type:"primary",size:"small"},{default:function(){return[(0,u.Uk)("新增")]}})])},listConfig:{columns:[{type:"index",fixed:"left"},{prop:"name",label:"名称",minWidth:120},{prop:"age",label:"性别",minWidth:120}],loadData:function(){var e=(0,l.Z)((0,i.Z)().mark((function e(n){var t,a,r;return(0,i.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.pageIndex,a=n.pageSize,r=n.searchForm,console.log(t,a,r),e.abrupt("return",new Promise((function(e){setTimeout((function(){e({success:!0,list:1===t?[{name:"张三",age:1},{name:"李四",age:2},{name:"王五",age:3},{name:"张三",age:1},{name:"李四",age:2},{name:"王五",age:3},{name:"张三",age:1},{name:"李四",age:2},{name:"王五",age:3},{name:"张三",age:1}]:[{name:"张三",age:1},{name:"李四",age:2},{name:"王五",age:3}],total:13})}),1e3)})));case 3:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),pagingConfig:{open:!0},tableConfig:{}},confirm:function(e){return console.log("confirm",e),new Promise((function(e){setTimeout((function(){e(!0)}),1e3)}))},cancel:function(){console.log("cancel")}};null===(e=h.value)||void 0===e||e.show({config:n,formInitValue:{}})};return function(e,i){var l=(0,u.up)("el-alert"),x=(0,u.up)("el-button"),b=(0,u.up)("el-card");return(0,u.wg)(),(0,u.iD)("div",s,[(0,u.Wm)(l,{title:"",type:"success",style:{"margin-bottom":"15px"}},{default:(0,u.w5)((function(){return[(0,u.Uk)(" 示例代码地址:"),f]})),_:1}),(0,u.Wm)(b,{shadow:"always",style:{"margin-top":"15px"},"body-style":{padding:"15px"}},{header:(0,u.w5)((function(){return[d]})),default:(0,u.w5)((function(){return[(0,u.Wm)((0,c.SU)(o.ZP),{ref_key:"BsDialogDom",ref:n},null,512),(0,u.Wm)(x,{type:"primary",onClick:t},{default:(0,u.w5)((function(){return[(0,u.Uk)(" 基础弹窗 ")]})),_:1})]})),_:1}),(0,u.Wm)(b,{shadow:"always",style:{"margin-top":"15px"},"body-style":{padding:"15px"}},{header:(0,u.w5)((function(){return[p]})),default:(0,u.w5)((function(){return[(0,u.Wm)((0,c.SU)(r.ZP),{ref_key:"BsFormDialogDom",ref:m},null,512),(0,u.Wm)(x,{type:"primary",onClick:v},{default:(0,u.w5)((function(){return[(0,u.Uk)(" 表单弹窗 ")]})),_:1})]})),_:1}),(0,u.Wm)(b,{shadow:"always",style:{"margin-top":"15px"},"body-style":{padding:"15px"}},{header:(0,u.w5)((function(){return[g]})),default:(0,u.w5)((function(){return[(0,u.Wm)((0,c.SU)(a.ZP),{ref_key:"BsListDialogDom",ref:h},null,512),(0,u.Wm)(x,{type:"primary",onClick:w},{default:(0,u.w5)((function(){return[(0,u.Uk)(" 列表弹窗 ")]})),_:1})]})),_:1})])}}});const v=m;var h=v}}]);
{"version":3,"file":"BsDate-cb6b1122.js","sources":["../../src/components/BsForm/components/BsDate.tsx"],"sourcesContent":["/*\n * @Author: 陈宇环\n * @Date: 2022-12-20 11:33:03\n * @LastEditTime: 2023-07-03 15:35:48\n * @LastEditors: 陈宇环\n * @Description:\n */\nimport { defineComponent, watch, ref } from 'vue';\nimport styles from '@/components/BsForm/style.module.scss';\nimport { CustomDynamicComponent } from '@/components/CustomDynamicComponent';\nimport dayjs from 'dayjs';\nexport default defineComponent({\n    name: 'BsDate',\n    props: {\n        modelValue: {\n            type: String,\n            default: '',\n        },\n        config: {\n            type: Object,\n            default() {\n                return {};\n            },\n        },\n    },\n    emits: ['update:modelValue', 'change'],\n    setup(props, { emit }) {\n        function getFormat(type, formatType) {\n            if (type === 'date') {\n                return 'YYYY-MM-DD';\n            }\n            if (type === 'month') {\n                return 'YYYY-MM';\n            }\n            if (type === 'year') {\n                return 'YYYY';\n            }\n            if (type === 'week') {\n                if (formatType === 'format') {\n                    return '第 ww 周';\n                }\n                else {\n                    return '';\n                }\n            }\n            if (type === 'datetime') {\n                return 'YYYY-MM-DD HH:mm:ss';\n            }\n            return 'YYYY-MM-DD';\n        }\n        const cloneModelValue = ref(dayjs());\n        watch(() => props.modelValue, () => {\n            cloneModelValue.value = props.modelValue;\n        }, { immediate: true });\n        // 解决datetime类型，不点击确认按钮无法触发change事件bug\n        watch(() => cloneModelValue.value, () => {\n            updateValue(cloneModelValue.value);\n        });\n        function updateValue(value) {\n            console.log(value, 'value');\n            emit('update:modelValue', value);\n            emit('change', {\n                prop: props.config?.prop ?? '',\n                value,\n            });\n        }\n        return () => {\n            const dynamicComponent = new CustomDynamicComponent();\n            const { dynamicDatePicker } = dynamicComponent;\n            return <div class={['BsDate', styles.width100]}>\n        <dynamicDatePicker class={['date', styles.width100]} v-model={cloneModelValue.value} placeholder={props.config.placeholder || `请选择${props.config?.label ?? ''}`} disabled={!!props.config.disabled} format={props.config.format || getFormat(props.config.type, 'format')} value-format={props.config.valueFormat || getFormat(props.config.type, 'valueFormat')} \n            /** ant-design-vue && ele 统一封装 - start */\n            type={props.config.type || 'date'} /** ele 专有属性*/ picker={props.config.type || 'date'} /** ant-design-vue专有属性*/ clearable={props.config.clearable !== false} // ele 特有属性\n             allowClear={props.config.allowClear ?? props.config.clearable !== false} // ant-design-vue特有属性\n             \n            /** ant-design-vue && ele 统一封装 - end */\n            {...props.config.nativeProps} onChange={updateValue}/>\n      </div>;\n        };\n    },\n});\nexport * from '../interface/index';\n"],"names":["defineComponent","name","props","modelValue","type","String","default","config","Object","_default","emits","setup","_ref","emit","getFormat","formatType","cloneModelValue","ref","dayjs","watch","value","immediate","updateValue","_props$config$prop","_props$config","console","log","prop","_props$config$label","_props$config2","_props$config$allowCl","dynamicComponent","CustomDynamicComponent","dynamicDatePicker","_createVNode","styles","width100","_mergeProps","onUpdateModelValue","$event","placeholder","concat","label","disabled","format","valueFormat","clearable","allowClear","nativeProps"],"mappings":"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"}
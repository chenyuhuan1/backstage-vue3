{"version":3,"file":"BsRadio-a6122609.js","sources":["../../src/components/BsForm/components/BsRadio.tsx"],"sourcesContent":["/*\n * @Author: 陈宇环\n * @Date: 2022-12-18 13:40:22\n * @LastEditTime: 2023-07-03 16:10:53\n * @LastEditors: 陈宇环\n * @Description:\n */\nimport { defineComponent, watch, ref } from 'vue';\nimport * as utils from '@/utils/common';\nimport styles from '@/components/BsForm/style.module.scss';\nimport { CustomDynamicComponent } from '@/components/CustomDynamicComponent';\nexport default defineComponent({\n    name: 'BsRadio',\n    props: {\n        modelValue: {\n            type: [Number, String, Boolean],\n            default: undefined,\n        },\n        config: {\n            type: Object,\n            default() {\n                return {};\n            },\n        },\n    },\n    emits: ['update:modelValue', 'change', 'setProp2'],\n    setup(props, { emit }) {\n        const { dynamicRadio, dynamicRadioGroup, dynamicRadioButton } = new CustomDynamicComponent();\n        const options = ref([]);\n        const optionsLoading = ref(false);\n        watch(() => props.config.options, async () => {\n            // 获取options下拉选项\n            if (Array.isArray(props.config.options)) { // 传入对象数组\n                options.value = props.config.options;\n            }\n            else if (Object.prototype.toString.call(props.config.options) === '[object Object]') { // 字典/接口获取\n                if (props.config.options.type === 'api') {\n                    optionsLoading.value = true;\n                    options.value = await props.config.options.getData();\n                    optionsLoading.value = false;\n                }\n                else if (props.config.options.type === 'dic') {\n                    options.value = utils.getDicByKey(props.config.options.key);\n                }\n            }\n            options.value = options?.value?.map((v) => {\n                return {\n                    ...v,\n                    label: v[props.config.labelKey || 'label'],\n                    value: v[props.config.valueKey || 'value'],\n                };\n            }) ?? [];\n        }, { immediate: true, deep: true });\n        function updateValue(value) {\n            let cloneValue = value;\n            // ant-Design-vue change返回的是 e:Event 对象\n            if (CustomDynamicComponent.language === CustomDynamicComponent.antLanguage) {\n                cloneValue = value.target.value;\n            }\n            emit('update:modelValue', cloneValue);\n            emit('change', {\n                prop: props.config?.prop ?? '',\n                value: cloneValue,\n                options,\n            });\n        }\n        return () => {\n            const componentInstance = props.config.showType === 'button' && CustomDynamicComponent.language === CustomDynamicComponent.eleLanguage ? dynamicRadioButton : dynamicRadio;\n            return <div class={['BsRadio', styles.width100]}>\n        <dynamicRadioGroup loading={optionsLoading.value} class=\"radio\" model-value={props.modelValue} value={props.modelValue} /** ant-design-vue特有属性 */ disabled={!!props.config.disabled} {...props.config.nativeProps} onChange={updateValue}>\n          {options.value && Array.isArray(options.value) && options.value.map((item, index) => {\n                    return <componentInstance key={item.value + '_' + index} label={item.value} value={item.value} {...props.config.nativeProps} v-slots={props.config.format ? {\n                            default: () => {\n                                return props.config.format(item);\n                            },\n                        } : {}}>\n                {item.label}\n              </componentInstance>;\n                })}\n        </dynamicRadioGroup>\n      </div>;\n        };\n    },\n});\nexport * from '../interface/index';\n"],"names":["defineComponent","name","props","modelValue","type","Number","String","Boolean","default","undefined","config","Object","_default","emits","setup","_ref","emit","_CustomDynamicCompone","CustomDynamicComponent","dynamicRadio","dynamicRadioGroup","dynamicRadioButton","options","ref","optionsLoading","watch","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_options$value$map","_options$value","wrap","_callee$","_context","prev","next","Array","isArray","value","prototype","toString","call","getData","sent","utils","key","map","v","_objectSpread","label","labelKey","valueKey","stop","immediate","deep","updateValue","_props$config$prop","_props$config","cloneValue","language","antLanguage","target","prop","componentInstance","showType","eleLanguage","_createVNode","styles","width100","_mergeProps","disabled","nativeProps","item","index","format"],"mappings":"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"}
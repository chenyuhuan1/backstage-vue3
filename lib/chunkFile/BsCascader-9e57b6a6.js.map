{"version":3,"file":"BsCascader-9e57b6a6.js","sources":["../../src/components/BsForm/components/BsCascader.tsx"],"sourcesContent":["/*\n * @Author: 陈宇环\n * @Date: 2022-09-07 16:37:21\n * @LastEditTime: 2023-07-03 16:01:55\n * @LastEditors: 陈宇环\n * @Description:\n */\nimport { defineComponent, watch, ref } from 'vue';\nimport * as utils from '@/utils/common';\nimport styles from '@/components/BsForm/style.module.scss';\nimport { CustomDynamicComponent } from '@/components/CustomDynamicComponent';\nexport default defineComponent({\n    name: 'BsCascader',\n    props: {\n        modelValue: {\n            type: [Number, String, Array, Object, Boolean],\n            default: '',\n        },\n        config: {\n            type: Object,\n            default() {\n                return {};\n            },\n        },\n    },\n    emits: ['update:modelValue', 'change'],\n    setup(props, { emit }) {\n        const options = ref([]);\n        const optionsLoading = ref(false);\n        watch(() => props.config.options, async () => {\n            // 获取options下拉选项\n            if (Array.isArray(props.config.options)) { // 传入对象数组\n                options.value = props.config.options;\n            }\n            else if (Object.prototype.toString.call(props.config.options) === '[object Object]') { // 字典/接口获取\n                if (props.config.options.type === 'api') {\n                    optionsLoading.value = true;\n                    options.value = await props.config.options.getData();\n                    optionsLoading.value = false;\n                }\n                else if (props.config.options.type === 'dic') {\n                    options.value = utils.getDicByKey(props.config.options.key);\n                }\n            }\n        }, { immediate: true, deep: true });\n        /**\n         * @description: 获取选中得item\n         * @param {*} value 当前选择中得value\n         * @return any 选中得item\n         */\n        const getOption = (value) => {\n            let curItem;\n            utils.treeForeach(options.value, (node) => {\n                if (node[props?.config?.valueKey ?? 'value'] === value) {\n                    curItem = node;\n                }\n            });\n            return curItem;\n        };\n        const handleChange = (value) => {\n            emit('update:modelValue', value);\n            emit('change', {\n                prop: props.config?.prop ?? '',\n                value,\n                options: options.value,\n                curItem: getOption(value),\n            });\n        };\n        return () => {\n            const dynamicComponent = new CustomDynamicComponent();\n            const { dynamicCascader } = dynamicComponent;\n            return <div class={['BsCascader', styles.width100]}>\n        <dynamicCascader \n            // loading={optionsLoading}\n            class={[styles.width100]} model-value={props.modelValue} options={options.value} \n            /** ant-design-vue && ele 统一封装 - start */\n            clearable={props.config.clearable !== false} // ele 特有属性\n             allowClear={props.config.allowClear ?? props.config.clearable !== false} // ant-design-vue特有属性\n             filterable={props.config.filterable !== false} // ele 特有属性\n             showSearch={props.config.showSearch ?? props.config.filterable !== false} // ant-design-vue特有属性\n             multiple={props.config.multiple === true} // ant-design-vue 特有属性\n             \n            /** ant-design-vue && ele 统一封装 - end */\n            /** ant-design-vue 特有属性-start */\n            fieldNames={props.config.fieldNames ?? {\n                    label: props.config.labelKey ?? 'label',\n                    value: props.config.valueKey ?? 'value',\n                    children: props.config.childrenKey ?? 'children',\n                }} \n            /** ant-design-vue 特有属性-start */\n            /** ele 特有属性-start */\n            props={Object.assign({\n                    emitPath: (props.config.emitPath === true),\n                    label: props.config.labelKey ?? 'label',\n                    value: props.config.valueKey ?? 'value',\n                    children: props.config.childrenKey ?? 'children',\n                    multiple: props.config.multiple === true,\n                }, props.config?.nativeProps?.props)} show-all-levels={props.config.showAllLevels !== false} // ===false时才会返回false\n             collapse-tags={props.config.collapseTags !== false} // ===false时才会返回false\n             collapse-tags-tooltip={typeof props.config.collapseTagsTooltip !== 'undefined' ? props.config.collapseTagsTooltip : props.config.collapseTags} // ===false时才会返回false\n             v-slots={props.config.format ? {\n                    default: ({ node, data }) => {\n                        return props.config.format(node, data);\n                    },\n                } : {}} \n            /** ele 特有属性-end */\n            {...props.config.nativeProps} onChange={handleChange}>\n        </dynamicCascader>\n      </div>;\n        };\n    },\n});\nexport * from '../interface/index';\n"],"names":["defineComponent","name","props","modelValue","type","Number","String","Array","Object","Boolean","default","config","_default","emits","setup","_ref","emit","options","ref","optionsLoading","watch","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","isArray","value","prototype","toString","call","getData","sent","utils","key","stop","immediate","deep","getOption","curItem","node","_props$config$valueKe","_props$config","valueKey","handleChange","_props$config$prop","_props$config2","prop","_props$config$allowCl","_props$config$showSea","_props$config$fieldNa","_props$config$labelKe","_props$config$valueKe2","_props$config$childre","_props$config$labelKe2","_props$config$valueKe3","_props$config$childre2","_props$config3","dynamicComponent","CustomDynamicComponent","dynamicCascader","_createVNode","styles","width100","_mergeProps","clearable","allowClear","filterable","showSearch","multiple","fieldNames","label","labelKey","children","childrenKey","assign","emitPath","nativeProps","showAllLevels","collapseTags","collapseTagsTooltip","format","_ref3","data"],"mappings":"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"}